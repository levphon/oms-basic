<div class="inmodal">
    <div class="modal-header">
        <h4 class="modal-title">添加商品</h4>
    </div>
    <div class="modal-body">
        <form role="form" class="form-horizontal form-fixed form-fixed-6" novalidate name="add_goods_form" method="post" enctype="multipart/form-data">
            <div class="form-group">
                <label class="col-lg-3 control-label required">商品名称</label>
                <div class="col-lg-9 control-content">
                    <input name="Name" class="form-control" type="text" ng-required="true" maxlength="50" ng-model="goodsData.name" v-async="asyncCallback(value)" />
                    <div class="m-t-xs" ng-show="add_goods_form.Name.$invalid && add_goods_form.submitted">
                        <small class="text-danger" ng-show="add_goods_form.Name.$error.required">输入商品名称</small>
                        <small class="text-danger" ng-show="add_goods_form.Name.$error.vAsync">商品名称已存在，请重新输入</small>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-lg-3 control-label required">商品ICON</label>
                <div class="col-lg-9 control-content">
                    <span nv-file-drop="" uploader="uploaderResume1" filters="queueLimit, customFilter">
                        <input id='hiddenFileResume1' type="file" nv-file-select="" uploader="uploaderResume1" ng-show="" multiple />
                        <button type="button" class="btn btn-primary btn-sm" onclick="javascript: $('#hiddenFileResume1').click();">上传图片</button>
                        <span class="text-muted">*尺寸500*340px单张不超过80k支持jpg/jpeg,gif,png格式的图片</span>
                    </span>
                    <div class="m-t-sm">
                        <div ng-if="imageSrc1" class="relative img-preview img-lg pull-left m-r-md">
                            <img ng-src="{{imageSrc1}}" />
                        </div>
                    </div>
                    <input name="imageSrc1" class="form-control" type="hidden" ng-required="true" ng-model="imageSrc1" />
                    <div class="m-t-xs" ng-show="add_goods_form.imageSrc1.$invalid && add_goods_form.submitted">
                        <small class="text-danger" ng-show="add_goods_form.imageSrc1.$error.required">商品ICON不能为空</small>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-lg-3 control-label required">车机商品底图</label>
                <div class="col-lg-9 control-content">
                    <span nv-file-drop="" uploader="uploaderResume2" filters="queueLimit, customFilter">
                        <input id='hiddenFileResume2' type="file" nv-file-select="" uploader="uploaderResume2" ng-show="" multiple />
                        <button type="button" class="btn btn-primary btn-sm" onclick="javascript: $('#hiddenFileResume2').click();">上传图片</button>
                        <span class="text-muted">*尺寸228*159px或208*140px单张不超过80k支持jpg/jpeg,gif,png格式的图片</span>
                    </span>
                    <div class="m-t-sm">
                        <div ng-if="imageSrc2" class="relative img-preview img-lg pull-left m-r-md">
                            <img ng-src="{{imageSrc2}}" />
                        </div>
                    </div>
                    <input name="imageSrc2" class="form-control" type="hidden" ng-required="true" ng-model="imageSrc2" />
                    <div class="m-t-xs" ng-show="add_goods_form.imageSrc2.$invalid && add_goods_form.submitted">
                        <small class="text-danger" ng-show="add_goods_form.imageSrc2.$error.required">车机商品底图不能为空</small>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-lg-3 control-label">车机促销icon</label>
                <div class="col-lg-9 control-content">
                    <span nv-file-drop="" uploader="uploaderResume3" filters="queueLimit, customFilter">
                        <input id='hiddenFileResume3' type="file" nv-file-select="" uploader="uploaderResume3" ng-show="" multiple />
                        <button type="button" class="btn btn-primary btn-sm" onclick="javascript: $('#hiddenFileResume3').click();">上传图片</button>
                        <span class="text-muted">尺寸73*70px单张不超过80k支持jpg/jpeg,gif,png格式的图片</span>
                    </span>
                    <div class="m-t-sm">
                        <div ng-if="imageSrc3" class="relative img-preview img-lg pull-left m-r-md">
                            <img ng-src="{{imageSrc3}}" />
                        </div>
                    </div>
                    <input name="imageSrc3" class="form-control" type="hidden" ng-model="imageSrc3" />
                </div>
            </div>
            <div class="form-group">
                <label class="col-lg-3 control-label required">商品分类</label>
                <div class="col-lg-9 control-content">
                    <tree-select name="category" only-leaf="true" ng-required="true" ts-option="categoryList" placeholder="请选择分类" ng-model="goodsData.category"></tree-select>
                    <div class="m-t-xs" ng-show="add_goods_form.category.$invalid && add_goods_form.submitted">
                        <small class="text-danger" ng-show="add_goods_form.category.$error.required">商品分类</small>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-lg-3 control-label required">绑定服务套餐</label>
                <div class="col-lg-9 control-content">
                  <!--   <button type="button" class="btn btn-primary btn-sm" ng-click="addpackage()">添加服务</button> -->
                    <button ladda="loadingDemo" ng-click="addpackage()" class="btn btn-primary btn-sm"  data-style="zoom-in">添加服务套餐</button>
                    
                    <input name="package" class="form-control" type="hidden" ng-required="true" ng-model="goodsData.packageValue" />
                    <div class="m-t-xs" ng-show="add_goods_form.package.$invalid && add_goods_form.submitted">
                        <small class="text-danger" ng-show="add_goods_form.package.$error.required">服务套餐列表为空,请重新绑定服务套餐</small>
                    </div>
                    <div ng-if="goodsData.packageValue">
                        <table class="table table-bordered table-hover m-t-sm">
                            <thead>
                                <tr>
                                    <th>服务套餐编号</th>
                                    <th>服务套餐名称</th>
                                    <th>服务套餐分类</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>{{ goodsData.packageValue.productId }}</td>
                                    <td>{{ goodsData.packageValue.name }}</td>
                                    <td>{{types[goodsData.packageValue.productType].text}}</td>
                                    <td><a href="javascript:;" ng-click="deletepackage(goodsData.packageValue)">删除</a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-lg-4 control-label required">是否推荐</label>
                <div class="control-content">
                    <div class="row">
                        <div class="col-lg-5">
                            <ui-select name="recommend" ng-required="true" ng-model="goodsData.recommend" theme="bootstrap">
                                <ui-select-match placeholder="请选择">{{$select.selected.text}}</ui-select-match>
                                <ui-select-choices repeat="item in recommendList">
                                    <div ng-bind=" item.text"></div>
                                </ui-select-choices>
                            </ui-select>
                            <div class="m-t-xs" ng-show="add_goods_form.recommend.$invalid && add_goods_form.submitted">
                                <small class="text-danger" ng-show="add_goods_form.recommend.$error.required">请选择</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <hr>
            <div class="form-group">
                <label class="col-lg-3 control-label">成本价</label>
                <div class="control-content">
                    <div class="row">
                        <div class="col-lg-5">
	                        <div class="input-group">
	                            <input class="form-control" name="costPrice" type="text" float-fix ng-minlength="0" ng-pattern="/^[0-9]+([.]{1}[0-9]{2})?$/" ng-model="goodsData.costPrice" />
	                            <span class="input-group-addon">元</span>
	                        </div>
	                         <div class="m-t-xs" ng-show="add_goods_form.costPrice.$invalid && add_goods_form.submitted">
	                                <small class="text-danger" ng-show="add_goods_form.costPrice.$error.pattern">必须是正整数和小数点2位 </small>
	                         </div>
                        </div>
                        <label class="col-lg-2 control-label">批发价</label>
                        <div class="col-lg-5">
                          <div class="input-group">
                             <input type="text" class="form-control" ng-minlength="0" float-fix name="wholesalePrice" ng-pattern="/^[0-9]+([.]{1}[0-9]{2})?$/" ng-model="goodsData.wholesalePrice" />
                             <span class="input-group-addon">元</span>
                          </div>
                           <div class="m-t-xs" ng-show="add_goods_form.wholesalePrice.$invalid && add_goods_form.submitted">
                               <small class="text-danger" ng-show="add_goods_form.wholesalePrice.$error.pattern">必须是正整数和小数点2位 </small>
                           </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-lg-3 control-label required">零售价</label>
                <div class="control-content">
                    <div class="row">
                        <div class="col-lg-5">
                        	<div class="input-group">
                            	<input type="text" class="form-control" float-fix ng-pattern="/^[0-9]+([.]{1}[0-9]{2})?$/" ng-minlength="0" ng-required="true" name="retailPrice" ng-model="goodsData.retailPrice" />
                            	<span class="input-group-addon">元</span>
                            </div>
                              <div class="m-t-xs" ng-show="add_goods_form.retailPrice.$invalid && add_goods_form.submitted">
                                <small class="text-danger" ng-show="add_goods_form.retailPrice.$error.required">添加零售价 </small>
                                <small class="text-danger" ng-show="add_goods_form.retailPrice.$error.pattern">必须是正整数和小数点2位 </small>
                            </div>
                        </div>
                        <label class="col-lg-2 control-label">优惠价</label>
                        <div class="col-lg-5">
                         <div class="input-group">
                            <input type="text" class="form-control" float-fix ng-minlength="0" name="preferentialPrice" ng-pattern="/^[0-9]+([.]{1}[0-9]{2})?$/" ng-model="goodsData.preferentialPrice" />
                            <span class="input-group-addon">元</span>
                        </div>
                        <div class="m-t-xs" ng-show="add_goods_form.preferentialPrice.$invalid && add_goods_form.submitted">
                             <small class="text-danger" ng-show="add_goods_form.preferentialPrice.$error.pattern">必须是正整数和小数点2位 </small>
                        </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-lg-3 control-label">库存</label>
                <div class="control-content">
                    <div class="row">
                        <div class="col-lg-5">
                            <input type="text" class="form-control" ng-pattern="/^\d+$/" name="storageQuantity" ng-minlength="0" ng-model="goodsData.storageQuantity" />
                       		<div class="m-t-xs" ng-show="add_goods_form.storageQuantity.$invalid && add_goods_form.submitted">
                                <small class="text-danger" ng-show="add_goods_form.$error.pattern">必须是正整数 </small>
                            </div>
                        </div>
                        
                        
                        <label class="col-lg-2 control-label">销量</label>
                        <div class="col-lg-5">
                            <input type="text" class="form-control" name="showSalse" ng-pattern="/^\d+$/"  ng-minlength="0" ng-model="goodsData.showSalse" />
                            <div class="m-t-xs" ng-show="add_goods_form.showSalse.$invalid && add_goods_form.submitted">
                                <small class="text-danger" ng-show="add_goods_form.showSalse.$error.pattern">必须是正整数 </small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-lg-3 control-label">浏览次数</label>
                <div class="control-content">
                    <div class="row">
                        <div class="col-lg-5">
                            <input type="text" class="form-control" name="showClicks" ng-pattern="/^\d+$/" ng-minlength="0" ng-model="goodsData.showClicks" />
                        	<div class="m-t-xs" ng-show="add_goods_form.showClicks.$invalid && add_goods_form.submitted">
                                <small class="text-danger" ng-show="add_goods_form.showClicks.$error.pattern">必须是正整数 </small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <hr>
            <div class="form-group">
                <label class="col-lg-3 control-label" ng-class="{required:!!goodsData.storageQuantity}">每个用户限购</label>
                <div class="control-content">
                    <div class="row">
                        <div class="col-lg-5">
                            <input type="text" class="form-control" name="purchaseQuantity" ng-pattern="/^\d+$/" ng-required="goodsData.storageQuantity" v-limit="{max:goodsData.storageQuantity}" ng-model="goodsData.purchaseQuantity" />
                            <div class="m-t-xs" ng-show="add_goods_form.purchaseQuantity.$invalid && add_goods_form.submitted">
                                <small class="text-danger" ng-show="add_goods_form.purchaseQuantity.$error.vLimit">限购的数量必须小于库存</small>
                                <small class="text-danger" ng-show="add_goods_form.purchaseQuantity.$error.required">不能为空</small>
                                <small class="text-danger" ng-show="add_goods_form.purchaseQuantity.$error.pattern">必须是正整数 </small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <hr>
            <div class="form-group">
                <label class="col-lg-3 control-label required">线下销售渠道</label>
                <div class="control-content">
                    <div class="row">
                        <div class="col-lg-5">
                            <ui-select name="offlinesaleschannels" ng-required="true" ng-model="goodsData.offlinesaleschannels" theme="bootstrap">
                                <ui-select-match placeholder="请选择线下销售渠道">{{$select.selected.conf_value}}</ui-select-match>
                                <ui-select-choices repeat="item in offlinesaleschannels" >
                                    <div ng-if="item.conf_id!=0"  ng-bind="item.conf_value "></div>
                                </ui-select-choices>
                            </ui-select>
                            <div class="m-t-xs" ng-show="add_goods_form.offlinesaleschannels.$invalid && add_goods_form.submitted">
                                <small class="text-danger" ng-show="add_goods_form.offlinesaleschannels.$error.required">请选择线下销售渠道</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <hr>
            <div class="form-group">
                <label class="col-lg-3 control-label required">是否显示</label>
                <div class="control-content">
                    <div class="row">
                        <div class="col-lg-5">
                            <ui-select name="displayed" ng-required="true" ng-model="goodsData.displayed" theme="bootstrap">
                                <ui-select-match>{{$select.selected.text}}</ui-select-match>
                                <ui-select-choices repeat="item in labelList">
                                    <div ng-bind="item.text"></div>
                                </ui-select-choices>
                            </ui-select>
                            <div class="m-t-xs" ng-show="add_goods_form.displayed.$invalid && add_goods_form.submitted">
                                <small class="text-danger" ng-show="add_goods_form.displayed.$error.required">请选择</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <hr>
            <div class="form-group">
                <label class="col-lg-3 control-label">商品主图</label>
                <div class="col-lg-9 control-content">
                    <div nv-file-drop="" uploader="uploaderPhotos" filters="queueLimit, customFilter">
                        <div class="m-b-sm">
                            <input id='hiddenFilePhotos' class="hide" type="file" nv-file-select="" filters="queueLimit,imageFilter" uploader="uploaderPhotos" multiple />
                            <button class="btn btn-primary btn-sm" onclick="javascript: $('#hiddenFilePhotos').click();" ng-show="uploaderPhotos.AllowAdd">上传图片</button>
                            <span class="text-muted">尺寸为1080x1080像素,单张不超过200K,支持jpg/jpeg,gif,png格式的图片。</span>
                        </div>
                        <div class="relative img-preview img-lg pull-left m-r-md" ng-repeat="item in addImg">
                            <img ng-src="{{item}}" />
                            <span class="glyphicon glyphicon-trash" ng-click="uploaderPhotos.funcRemoveItem($index)"></span>
                        </div>
                    </div>
                </div>
            </div>
            <hr>
            <div class="form-group">
                <label class="col-lg-4 control-label">描述</label>
                <div class="col-lg-9 control-content">
                    <!-- <textarea ng-model="goodsData.description" name="description" class="form-control"></textarea> -->
                    <div summernote id="wjy"   class="summernote" on-image-upload="imageUpload(files)"  ng-model="goodsData.description"></div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button ng-if="state==undefined" type="submit" class="btn btn-primary btn-outline pull-left" ng-click="ok(1)">存草稿</button>
        <button ng-if="state==undefined" type="submit" class="btn btn-primary" ng-click="ok(2)">上架</button>
        <button type="button" class="btn btn-white" ng-click="cancel()">取消</button>
    </div>
</div>
